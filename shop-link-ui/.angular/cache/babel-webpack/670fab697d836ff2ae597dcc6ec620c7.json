{"ast":null,"code":"import { __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { routerTransition } from '../../router.animations';\nimport { ModalDismissReasons, NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { HttpClient } from '@angular/common/http'; // var dt = require( 'datatables.net' )();\n\nimport { Router } from '@angular/router';\nimport { isNumeric } from 'rxjs/internal-compatibility';\nimport { ToastrManager } from 'ng6-toastr-notifications';\nimport { DashboardService } from '../../shared/services/dashboard.service';\nlet DashboardComponent = class DashboardComponent {\n  constructor(modalService, http, router, dashboardservice, notificationMessages) {\n    this.modalService = modalService;\n    this.http = http;\n    this.router = router;\n    this.dashboardservice = dashboardservice;\n    this.notificationMessages = notificationMessages;\n    this.waitSpinner = true;\n    this.showSpinner = false;\n    this.barcode = '';\n    this.values = [];\n    this.txtAckMirno = '';\n    this.txtweightinton = '';\n    this.txttotalsetup = '';\n    this.txttotaloptions = '';\n    this.txttheortime = '';\n    this.loggedInUserName = '';\n    this.optionSelectedGroup = 'null';\n    this.groups = [];\n    this.workCenter = [];\n    this.optionSelectedWorkCenter = 'null';\n    this.SECTION_TYPE = [\"Shift 1\", \"Shift 2\", \"Shift 3\"];\n    this.optionSelectedShift = \"null\";\n    this.pddetails = [];\n\n    if (localStorage.getItem('isLoggedin') == 'true') {\n      this.loggedInUserName = localStorage.getItem('userName'); //loading group data at page load\n\n      this.loadGroups(); // this.loadGridData('000080000100','TM02')\n    } else {\n      this.router.navigate(['/login']);\n      this.notificationMessages.errorToastr('Session logged out!! Please login again!!');\n    }\n  }\n\n  ngOnInit() {}\n\n  onEnter() {\n    this.findDB();\n  }\n\n  onOptionsSelectedGroup(event) {\n    console.log(event); //option value will be sent as event\n\n    this.optionSelectedGroup = event;\n    this.loadWorkCenter(event);\n  }\n\n  loadGroups() {\n    this.dashboardservice.GetGroups().subscribe(groupsData => {\n      this.groups = groupsData;\n    });\n  }\n\n  onOptionsSelectedWorkCenter(event) {\n    this.optionSelectedWorkCenter = event; // console.log(event); //option value will be sent as event\n  }\n\n  loadWorkCenter(group) {\n    console.log('group', group);\n    this.dashboardservice.GetWorkCenter(group).subscribe(workCenterData => {\n      this.workCenter = workCenterData;\n    });\n  }\n\n  onOptionsSelectedShift(event) {\n    console.log(event); //option value will be sent as event\n  }\n\n  clearText() {\n    this.txtweightinton = '';\n    this.txttotalsetup = '';\n    this.txttotaloptions = '';\n    this.txttheortime = '';\n  }\n\n  loadGridData(mirno, plantCode) {\n    this.dashboardservice.GetDashboardData(mirno, plantCode).subscribe(productionData => {\n      this.pddetails = productionData;\n    });\n  }\n\n  findDB() {\n    this.waitSpinner = false;\n    this.showSpinner = true;\n    this.txtAckMirno = this.txtAckMirno.padStart(12, '0');\n    this.clearText();\n\n    if (isNumeric(this.txtAckMirno) != true) {\n      this.notificationMessages.errorToastr(\"Enter correct Numeric MIR Number\");\n      this.waitSpinner = true;\n      this.showSpinner = false;\n      return;\n    }\n\n    this.section1 = this.txtAckMirno;\n    this.section1 = this.section1.substring(0, this.section1.length - (this.section1.length - 1));\n    console.log(typeof this.section1);\n\n    if (this.section1 != 0) {\n      this.waitSpinner = true;\n      this.showSpinner = false;\n      this.notificationMessages.errorToastr(\"Enter valid MIR number\");\n      return;\n    }\n\n    this.dashboardservice.getOperationByMirno(this.txtAckMirno).subscribe(data => {\n      var bp1 = data;\n\n      if (bp1 != this.section1) {\n        this.notificationMessages.errorToastr(\"MIR \" + this.txtAckMirno + \" is from \" + data + \" Plant\");\n        return;\n      }\n    }); // this.dashboardservice.findDB().subscribe((data: Response) => {\n    //   console.log('data', data); \n    //   if (0 != null) { \n    //   }\n    //   else {\n    //     this.waitSpinner = true;\n    //     this.showSpinner = false;\n    //     this.notificationMessages.errorToastr('Added!!')\n    //     return;\n    //   }\n    // });\n  }\n\n  triggerModal(content) {\n    this.modalService.open(content, {\n      ariaLabelledBy: 'modal-basic-title',\n      size: 'xl',\n      backdrop: 'static'\n    }).result.then(res => {\n      this.closeModal = `Closed with: ${res}`;\n    }, res => {\n      this.closeModal = `Dismissed ${this.getDismissReason(res)}`;\n    });\n  }\n\n  getDismissReason(reason) {\n    if (reason === ModalDismissReasons.ESC) {\n      return 'by pressing ESC';\n    } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\n      return 'by clicking on a backdrop';\n    } else {\n      return `with: ${reason}`;\n    }\n  }\n\n  refresh() {\n    // this.router.navigate(['/dashboard']);\n    window.location.reload();\n  }\n\n};\nDashboardComponent = __decorate([Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.scss'],\n  animations: [routerTransition()]\n}), __metadata(\"design:paramtypes\", [NgbModal, HttpClient, Router, DashboardService, ToastrManager])], DashboardComponent);\nexport { DashboardComponent };","map":null,"metadata":{},"sourceType":"module"}